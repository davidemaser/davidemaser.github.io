function urlExists(e){var t=jQuery.ajax({type:"HEAD",url:"https:"+e,async:!1});return t.status}function shoppifyCreatePage(){jQuery.post("https://1b86c025540a1c7acf215c1bb2b6eb21:8337d12669193f8ed77d55a5703fcc31@lasthunt.myshopify.com/admin/pages.json",{page:{title:"Testing A Page",body_html:"<h1>Just a page test</h1>"}})}function validateImage(e){if("main"==e){var t=$("#image_gl").val();if(""!==t){var l=urlExists(t);200!==l?($("#image_gl").css("background-color","rgba(255, 51, 0, 0.2)"),$(".image_count").css("background-color","#ff3300").css("font-weight","bold").css("color","#fff").html("Image does not exist")):200==l?($(".image_count").attr("style","").css("background-color","rgb(82, 197, 82)").html("Image validated"),$("#image_gl").attr("style","")):$(".image_count").attr("style","").html("Shopify CDN")}}else if("alt"==e){var t=$("#alt_image_gl").val();if(""!==t){var l=urlExists(t);200!==l?($("#alt_image_gl").css("background-color","rgba(255, 51, 0, 0.2)"),$(".alt_image_count").css("background-color","#ff3300").css("font-weight","bold").css("color","#fff").html("Image does not exist")):200==l?($(".alt_image_count").attr("style","").css("background-color","rgb(82, 197, 82)").html("Image validated"),$("#alt_image_gl").attr("style","")):$(".alt_image_count").attr("style","").html("Shopify CDN")}}}function showLineBreaks(e){var t="#content_value";if("a"==e){var l=$(t).val(),a=l.replace(/<div/g,"\n<div").replace(/<\/div><\/div>/g,"</div>\n</div>"),s=a.replace('<div id="start_date">','   <div id="start_date">').replace('<div id="end_date">','   <div id="end_date">').replace('<div id="show_count">','   <div id="show_count">').replace('<div id="ongoing_event">','   <div id="ongoing_event">').replace('<div id="popup_link">','   <div id="popup_link">').replace(/<div class="event-active-bg">/g,'   <div class="event-active-bg">').replace(/<div class="event-active-content">/g,'   <div class="event-active-content">').replace(/<p class="headline">/g,'\n         <p class="headline">').replace(/<p class="subtitle">/g,'\n         <p class="subtitle">').replace(/<\/p><\/div>/g,"</p>\n</div>").replace("|-|","\n|-|");$(t).val(s.replace("\n",""))}else{var l=$(t).val().replace(/\n/g,"").replace(/> /g,">").replace(/>        /g,">").replace(/>  /g,">");$("#content_value").val(l)}}function resetErrors(){$(".label:not(.error_message):not(.warning_message)").removeClass("label-warning").removeClass("label-danger").addClass("label-default"),$(".badge").remove(),$(".panel-heading").find(".label-info").remove(),$(".input-group-addon").attr("style",""),$(".date_starts,.date_ends").html("Strict date format"),$(".en_title_count,.fr_title_count,.en_subtitle_count,.fr_subtitle_count").html("30 characters max"),$(".en_btlabel_count,.fr_btlabel_count").html("18 characters max"),$("#image_gl").attr("style",""),$(".image_count").html("Shopify CDN")}function errorViewer(){var e="#pageBuilder",t="#content_value",l=".error_message",a=".warning_message";$(e).find("span.label").removeClass("label-danger").addClass("label-default"),$(e).find("span.label").removeClass("label-warning").addClass("label-default"),$(".label-info").remove(),$("span.badge").remove();var s=[],n=[],o=[],r=[],c=$(t).val(),p=$(t).val().split("|-|")[0],d=$(t).val().split("|-|")[1],h=c.split('<div id="start_date">')[1],f=h.split("</div>")[0].length,u=c.split('<div id="end_date">')[1],g=u.split("</div>")[0].length;if(p.indexOf("#ee3600;")>-1)var v=p.split('<p class="headline" style="color:#ee3600;">')[1],m=v.split("</p>")[0].length;else p.indexOf("#000;")>-1?(v=p.split('<p class="headline" style="color:#000;">')[1],m=v.split("</p>")[0].length):p.indexOf("#9bd000;")>-1?(v=p.split('<p class="headline" style="color:#9bd000;">')[1],m=v.split("</p>")[0].length):p.indexOf("#fff;")>-1?(v=p.split('<p class="headline">')[1],m=v.split("</p>")[0].length):(v=p.split('<p class="headline">')[1],m=v.split("</p>")[0].length);var b=p.split('<p class="subtitle">')[1],_=b.split("</p>")[0].length,y=p.split('<img src="')[1],w=y.split('" />')[0].length,x=y.split('" />')[0],k=p.split('href="')[1],C=k.split('"')[0].length,O=p.split('class="action_button">')[1],T=O.split("</a>")[0].length;if(d.indexOf("#ee3600;")>-1)var E=d.split('<p class="headline" style="color:#ee3600;">')[1],P=E.split("</p>")[0].length;else d.indexOf("#000;")>-1?(E=d.split('<p class="headline" style="color:#000;">')[1],P=E.split("</p>")[0].length):d.indexOf("#9bd000;")>-1?(E=d.split('<p class="headline" style="color:#9bd000;">')[1],P=E.split("</p>")[0].length):d.indexOf("#fff;")>-1?(E=d.split('<p class="headline">')[1],P=E.split("</p>")[0].length):(E=d.split('<p class="headline">')[1],P=E.split("</p>")[0].length);var S=d.split('<p class="subtitle">')[1],D=S.split("</p>")[0].length,I=d.split('class="action_button">')[1],N=I.split("</a>")[0].length;if(0==f&&(s.push("No Start Date"),o.push("start_date")),0==g&&(s.push("No End Date"),o.push("end_date")),0==m&&(n.push("No English Title"),r.push("title_en")),m>30&&(n.push("English Title is too long"),r.push("title_en")),0==P&&(n.push("No French Title"),r.push("title_fr")),P>30&&(n.push("French Title is too long"),r.push("title_fr")),0==_&&(n.push("No English Subtitle"),r.push("subtitle_en")),_>30&&(n.push("English Subtitle is too long"),r.push("subtitle_en")),0==D&&(n.push("No French Subtitle"),r.push("subtitle_fr")),D>30&&(n.push("French Subtitle is too long"),r.push("subtitle_fr")),(0==w||"undefined"==x)&&(s.push("Image is missing"),o.push("image_gl")),0==C&&(n.push("Button link is missing"),r.push("button_link_gl")),3>T&&(s.push("English button label is missing"),o.push("button_label_en")),T>18&&(n.push("English button label is too long"),r.push("button_label_en")),3>N&&(s.push("French button label is missing"),o.push("button_label_fr")),N>18&&(n.push("French button label is too long"),r.push("button_label_fr")),0==s.length)$(".error_message").css("opacity","0"),$(".error_bubble").empty();else{if($('<span class="badge">'+s.length+"</span>&nbsp;&nbsp;").insertBefore($(".action_utilities").find("span")),$(l).mouseover(function(){$(".error_bubble").show()}),$(l).mouseout(function(){$(".error_bubble").hide()}),s.length>1){var F="";for(i=0;i<s.length;i++)F+=s[i]+"<br />";$(".error_bubble").html(F)}else $(".error_bubble").html(s);$(l).css("opacity","1");var A='<span class="glyphicon glyphicon-remove-sign" aria-hidden="true"></span>';A+=s.length+" error",s.length>1&&(A+="s"),$(l).html(A)}if(0==n.length)$(".warning_message").css("opacity","0"),$(".warning_bubble").empty();else{if($(a).mouseover(function(){$(".warning_bubble").show()}),$(a).mouseout(function(){$(".warning_bubble").hide()}),n.length>1){var j="";for(i=0;i<n.length;i++)j+=n[i]+"<br />";$(".warning_bubble").html(j)}else $(".warning_bubble").html(n);$(a).css("opacity","1");var B='<span class="glyphicon glyphicon-warning-sign" aria-hidden="true"></span>';B+=n.length+" warning",n.length>1&&(B+="s"),$(a).html(B)}for(i=0;i<o.length;i++)$("#"+o[i]).parent().parent().find(".label").removeClass("label-default").addClass("label-danger"),$('<span class="label label-info" title="'+s[i]+'"><span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span></span>').insertAfter($("#"+o[i]).parent().parent().find(".label").first());for(i=0;i<r.length;i++)$("#"+r[i]).parent().parent().find(".label").removeClass("label-default").addClass("label-warning")}function appendTimer(e){var t=$(".subtitle.timedown.is-countdown").length;if(0==t)if("add"==e){var l='<div itemprop="startDate" content="2015-05-22T11:00:00-06:00" class="b_line_exo is-countdown"><span>starts in <b>2<span class="force_lower"> days</span> 22:22:22</b> </span></div>';$("#html-view").append(l)}else"rem"==e&&$(".b_line_exo").remove()}function checkOngoing(){var e=".dropdown-menu",t=$("#content_value").val();if(t.indexOf('<div id="ongoing_event">')>-1)var l=t.split('<div id="ongoing_event">')[1],a=l.split("</div>")[0];else a="false";"true"==a?($(e).find("li:nth-child(1)").hide(),$(e).find("li:nth-child(2)").hide(),$(e).find("li:nth-child(3)").hide()):($(e).find("li:nth-child(1)").show(),$(e).find("li:nth-child(2)").show(),$(e).find("li:nth-child(3)").show())}function txtLengthCounter(){var e=$("#start_date").val().length;0==e?$(".date_starts").css("background-color","#ff3300").css("font-weight","bold").css("color","#fff").html("Can't be empty"):$(".date_starts").attr("style","").html("Strict date format");var t=$("#end_date").val().length;1>t?$(".date_ends").css("background-color","#ff3300").css("font-weight","bold").css("color","#fff").html("Can't be empty"):$(".date_ends").attr("style","").html("Strict date format");var l=$("#title_en").val().length,a=30;if(l>a)$(".en_title_count").css("background-color","#ff3300").css("font-weight","bold").css("color","#fff").html("Overlimit");else{if(a-l>1||a-l==0)var s="characters";else s="character";$(".en_title_count").attr("style","").html(a-l+" "+s+" remaining")}var n=$("#title_fr").val().length,i=30;if(n>i)$(".fr_title_count").css("background-color","#ff3300").css("font-weight","bold").css("color","#fff").html("Overlimit");else{if(i-n>1||i-n==0)var s="characters";else s="character";$(".fr_title_count").attr("style","").html(i-n+" "+s+" remaining")}var o=$("#subtitle_en").val().length,r=30;if(o>r)$(".en_subtitle_count").css("background-color","#ff3300").css("font-weight","bold").css("color","#fff").html("Overlimit");else{if(r-o>1||r-o==0)var s="characters";else s="character";$(".en_subtitle_count").attr("style","").html(r-o+" "+s+" remaining")}var c=$("#subtitle_fr").val().length,p=30;if(c>p)$(".fr_subtitle_count").css("background-color","#ff3300").css("font-weight","bold").css("color","#fff").html("Overlimit");else{if(p-c>1||p-c==0)var s="characters";else s="character";$(".fr_subtitle_count").attr("style","").html(p-c+" "+s+" remaining")}var d=$("#button_label_en").val().length,h=18;if(d>h)$(".en_btlabel_count").css("background-color","#ff3300").css("font-weight","bold").css("color","#fff").html("Overlimit");else{if(h-d>1||h-d==0)var s="characters";else s="character";$(".en_btlabel_count").attr("style","").html(h-d+" "+s+" remaining")}var f=$("#button_label_fr").val().length,u=18;if(f>u)$(".fr_btlabel_count").css("background-color","#ff3300").css("font-weight","bold").css("color","#fff").html("Overlimit");else{if(u-f>1)var s="characters";else s="character";$(".fr_btlabel_count").attr("style","").html(u-f+" "+s+" remaining")}}function getContent(){try{if(""!==$("#unclosed-tag-finder-input").val()){var e=$("#unclosed-tag-finder-input").val(),t=e.replace(/(\r\n|\n|\r)/gm,"").replace(/&/g,"&").replace(/&gt;/g,">").replace(/&apos;/g,"'"),l=t.split("|-|")[0],a=t.split("|-|")[1],s=l,n=s.split('<div id="event-active-today">')[0],i=n.split('<div id="start_date">')[1],o=i.split("</div>")[0],r=n.split('<div id="end_date">')[1],c=r.split("</div>")[0],p=n.split('<div id="show_count">')[1],d=p.split("</div>")[0],h=n.split('<div id="ongoing_event">')[1],f=h.split("</div>")[0];""==f&&(f="false"),d_str44=n.split('<div id="promote_hero">')[1],d_ob44=d_str44.split("</div>")[0],""==d_ob44&&(d_ob44="false");var u=n.split('<div id="popup_link">')[1],g=u.split("</div>")[0];if(n.indexOf('<div id="show_title">')>-1){var v=n.split('<div id="show_title">')[1],m=v.split("</div>")[0];""==m&&(m="true")}else m="true";if(n.indexOf('<div id="alt_image">')>-1)var b=n.split('<div id="alt_image">')[1],_=b.split("</div>")[0];else _="";if(n.indexOf('<div id="show_subtitle">')>-1){var y=n.split('<div id="show_subtitle">')[1],w=y.split("</div>")[0];""==w&&(w="true")}else w="true";var x=s.split('<div id="event-active-today">')[1],k=x.split('<div class="event-active-bg"><img src="')[1],C=k.split('" /></div>')[0],O=x.split('<p class="headline')[1],T=O.split('">')[1],E=T.split("</p>")[0].replace(/<(?:.|\n)*?>/gm,"").replace('<span style="color: #000000;">',"").replace('<span style="color:#000000;">',"").replace('<span style="color: #000;">',"").replace('<span style="color:#000;">',"").replace('<span style="color: #ffffff;">',"").replace('<span style="color:#ffffff;">',"").replace('<span style="color: #fff;">',"").replace('<span style="color:#fff;">',"").replace("</span>","");if(x.indexOf('style="color:')>-1)var P=x.split('style="color:')[1],S=P.split(';">')[0].replace(" ","").replace("#000000","#000").replace("#ffffff","#fff").replace("#FFFFFF","#FFF");else var S="#fff";var T=x.split('<p class="subtitle">')[1],D=T.split("</p>")[0].replace(/<(?:.|\n)*?>/gm,""),I=x.split('<div class="event-active-cta">')[1],N=I.split("</div>")[0];if(N.indexOf('id="')>-1){var F=N.split('<a id="')[1],A=F.split('"')[0];$("#pop_up_ID").css("opacity",1)}else var A="popup-1";var j=N.split('class="action_button">')[1],B=j.split("</a>")[0].trim().replace(/<(?:.|\n)*?>/gm,"");if(N.indexOf('href=""')>-1||N.indexOf('href=" "')>-1)var L="#";else if(N.indexOf('href="/"')>-1||N.indexOf('href="/ "')>-1)var L="";else var M=N.split('href="')[1],L=M.split('" class="action_button">')[0].replace("http://www.ladernierechasse.com","").replace("http://www.thelasthunt.com","");var Y=a,H=Y.split('<div id="event-active-today">')[1],R=H.split('<div class="event-active-bg"><img src="')[1],U=(R.split('" /></div>')[0],H.split('<p class="headline')[1]),z=U.split('">')[1],J=z.split("</p>")[0].replace(/<(?:.|\n)*?>/gm,"").replace('<span style="color: #000000;">',"").replace('<span style="color:#000000;">',"").replace('<span style="color: #000;">',"").replace('<span style="color:#000;">',"").replace('<span style="color: #ffffff;">',"").replace('<span style="color:#ffffff;">',"").replace('<span style="color: #fff;">',"").replace('<span style="color:#fff;">',"").replace("</span>",""),z=H.split('<p class="subtitle">')[1],V=z.split("</p>")[0].replace(/<(?:.|\n)*?>/gm,""),q=H.split('<div class="event-active-cta">')[1],K=q.split("</div>")[0],G=K.split('class="action_button">')[1],Q=G.split("</a>")[0].trim().replace(/<(?:.|\n)*?>/gm,"");switch($("#start_date").val(o),$("#end_date").val(c),$("#show_count").val(d),$("#sis_ongoing").val(f),$("#promote_hero").val(d_ob44),$("#image_gl").val(C),$("#alt_image_gl").val(_),$("#title_en").val(E),$("#title_fr").val(J),$("#subtitle_en").val(D),$("#subtitle_fr").val(V),$("#button_label_en").val(B),$("#button_label_fr").val(Q),$("#button_link_gl").val(L),$("#pop_up_ID").val(A),$("#pop_up_link").val(g),$("#title_color").val(S),$("#show_title").val(m),$("#show_subtitle").val(w),S){case"#fff":var W="white";break;case"#000":var W="black";break;case"#9bd000":var W="green";break;case"#ee3600":var W="red";break;default:var W="white"}$(".selector-color:not(."+W+")").removeClass("glyphicon glyphicon-ok"),$(".selector-color."+W).addClass("glyphicon glyphicon-ok")}else alert("You haven't entered any content. I'm going to close now!!!");txtLengthCounter()}catch(x){alert("Something went wrong. Your code can't be translated to the Page Builder form.\n\nTry creating your page from scratch or running the code cleaner utility first.")}}function livePreview(e,t,l){var a="#html-view";if("small"==e)$(a).attr("style",""),$(".preview").addClass("mini").removeClass("fullsize"),$(".well.well-lg").attr("style",""),"en"==t?($(a).html(""),$(a).html(l.split("|-|")[0]),$("#content_value").css("opacity",0)):"fr"==t?($(a).html(""),$(a).html(l.split("|-|")[1]),$("#content_value").css("opacity",0)):"all"==t&&($(a).html(""),$(a).html(l.replace("|-|","")),$("#content_value").css("opacity",0));else if("full"==e){$(".hepaT").remove();try{if($(a).css("left","0px"),"en"==t)var s=l.split("|-|")[0];else if("fr"==t)var s=l.split("|-|")[1];if(l.split("|-|")[0].indexOf('<div id="alt_image">')>-1)var n=l.split("|-|")[0].split('<div id="alt_image">')[1],i=n.split("</div>")[0];else var n=s.split('src="')[1],i=n.split('"')[0];if(s.indexOf("#ee3600;")>-1)var o=s.split('<p class="headline" style="color:#ee3600;">')[1],r=' style="color:#ee3600;"';else if(s.indexOf("#000;")>-1)var o=s.split('<p class="headline" style="color:#000;">')[1],r=' style="color:#000;"';else if(s.indexOf("#9bd000;")>-1)var o=s.split('<p class="headline" style="color:#9bd000;">')[1],r=' style="color:#9bd000;"';else if(s.indexOf("#fff;")>-1)var o=s.split('<p class="headline">')[1],r=' style="color:#fff;"';else var o=s.split('<p class="headline">')[1],r="";var c=o.split("</p>")[0],p=s.split('<p class="subtitle">')[1],d=p.split("</p>")[0],h=s.split('href="')[1],f=h.split('" class="action_button">')[0],u=s.split('class="action_button">')[1],g=u.split("</a>")[0],v='<div data-str="'+i+'"';v+='id="slide-4" class="hero fwidth root-4">',v+='<div class="bcg skrollable skrollable-between" data-center="background-position: 50% 0px;"',v+=' data-top-bottom="background-position: 50% -200px;" data-anchor-target="#slide-4"',v+=' style="background-image: url('+i+'); background-position: 50% -55.2631578947369px;">',v+='<div class="hsContainer">',v+='<div class="hsContent center skrollable skrollable-before" data-100-top="opacity: 1"',v+=' data-25-top="opacity: 0" data-anchor-target="#slide-4 .animated" style="opacity: 1;">',v+='<div class="animated fadeIn delay-025s hero_head">',v+='<p class="subtitle timedown is-countdown" id="countdown4" style="opacity:0.9"><span>ends in  <b>2<span class="force_lower"> day</span>22:22:22</b> </span></p>',v+='<h1 class="headline herobanner"'+r+">"+c+"</h1>",v+='<p class="subtitle herobanner">'+d+"</p>",v+='<a id="" href="'+f+'" class="action_button hero">'+g+"</a>",v+="</div></div></div></div></div>",$(".preview").removeClass("mini").addClass("fullsize"),$(".well.well-lg").css("width","100%"),$(a).html(""),$(a).html(v),$("#content_value").css("opacity",0)}catch(m){alert("The code is not valid TLH Hero code or it is missing key attributes")}}}function codeOutput(e){var t="#content_value",l=$("#pageBuilder").serializeArray(),a=l[0].value,s=l[1].value,n=l[2].value.replace(/<(?:.|\n)*?>/gm,"").replace('<span style="color: #000000;">',"").replace('<span style="color:#000000;">',"").replace('<span style="color: #000;">',"").replace('<span style="color:#000;">',"").replace('<span style="color: #ffffff;">',"").replace('<span style="color:#ffffff;">',"").replace('<span style="color: #fff;">',"").replace('<span style="color:#fff;">',"").replace("</span>",""),i=l[3].value.replace(/<(?:.|\n)*?>/gm,"").replace('<span style="color: #000000;">',"").replace('<span style="color:#000000;">',"").replace('<span style="color: #000;">',"").replace('<span style="color:#000;">',"").replace('<span style="color: #ffffff;">',"").replace('<span style="color:#ffffff;">',"").replace('<span style="color: #fff;">',"").replace('<span style="color:#fff;">',"").replace("</span>",""),o=l[4].value,r=l[5].value.replace(/<(?:.|\n)*?>/gm,""),c=l[6].value.replace(/<(?:.|\n)*?>/gm,""),p=l[7].value.replace("http://www.thelasthunt.com","").replace("http://www.ladernierechasse.com",""),d=l[8].value.replace("http://www.thelasthunt.com","").replace("http://www.ladernierechasse.com",""),h=l[9].value.replace(/<(?:.|\n)*?>/gm,""),f=l[10].value.replace(/<(?:.|\n)*?>/gm,""),u=l[11].value.replace("http://www.thelasthunt.com","").replace("http://www.ladernierechasse.com",""),g=l[12].value,v=l[13].value,m=l[14].value;if(is_ongoing=""!==l[15].value?l[15].value:"false",promote_hero=""!==l[18].value?l[18].value:"false",is_title_show=""!==l[16].value?l[16].value:"false",is_subtitle_show=""!==l[17].value?l[17].value:"false",p.indexOf("_1024x1024")>-1||p.indexOf("_2048x2048")>-1||p.indexOf("_600x600")>-1||p.indexOf("_480x480")>-1||p.indexOf("_large")>-1||p.indexOf("_medium")>-1||p.indexOf("_grande")>-1||p.indexOf("_compact")>-1)var b=p.replace("https:","").replace("http:","");else{if("true"!==is_ongoing)var _="_2048x2048";else var _="_1024x1024";if(p.indexOf(".jpg")>-1)var y=p.split(".jpg")[0],w=".jpg",_="_2048x2048",b=y.replace("https:","").replace("http:","")+_+w;else if(p.indexOf(".png")>-1)var y=p.split(".png")[0],w=".png",_="_2048x2048",b=y.replace("https:","").replace("http:","")+_+w;else if(p.indexOf(".gif")>-1)var y=p.split(".gif")[0],w=".gif",_="_2048x2048",b=y.replace("https:","").replace("http:","")+_+w}var x='<div style="display: none;">';x+='<div id="start_date">'+a+"</div>",x+='<div id="end_date">'+s+"</div>",x+='<div id="show_count">'+m+"</div>",x+='<div id="ongoing_event">'+is_ongoing+"</div>",x+='<div id="promote_hero">'+promote_hero+"</div>",x+='<div id="popup_link">'+g+"</div>",x+='<div id="show_title">'+is_title_show+"</div>",x+='<div id="show_subtitle">'+is_subtitle_show+"</div>",""!==d&&(x+='<div id="alt_image">'+d+"</div>"),x+="</div>",x+='<div id="event-active-today">',x+='<div class="event-active-bg">',x+='<img src="'+b+'" />',x+="</div>",x+='<div class="event-active-content">',x+='<p class="headline"',"#fff"!==o&&(x+=' style="color:'+o+';"'),x+=">"+n+"</p>",x+='<p class="subtitle">'+r+"</p>",x+="</div>",x+='<div class="event-active-cta"><a',"true"==g&&(x+=' id="'+v+'"'),x+=' href="',"/"==u.charAt(0)?1==u.length&&(u=""):""==u?u="":("#"!==u||""!==u)&&(x+="/"),x+=u+'" class="action_button"> '+h+" </a></div>",x+="</div>",x+="|-|",x+='<div id="event-active-today">',x+='<div class="event-active-bg">',x+='<img src="'+b+'" />',x+="</div>",x+='<div class="event-active-content">',x+='<p class="headline"',"#fff"!==o&&(x+=' style="color:'+o+';"'),x+=">"+i+"</p>",x+='<p class="subtitle">'+c+"</p>",x+="</div>",x+='<div class="event-active-cta"><a',"true"==g&&(x+=' id="'+v+'"'),x+=' href="',"/"==u.charAt(0)||("#"!==u||""!==u)&&(x+="/"),x+=u+'" class="action_button"> '+f+" </a></div>",x+="</div>",1==e&&$("html, body").animate({scrollTop:0},"slow"),200==urlExists(b)?($(t).html(x),$("#preview_page_EN").click(function(){$(".hepa").remove(),$(this).append('<span class="glyphicon glyphicon-ok hepa"></span>'),livePreview("small","en",x)}),$("#preview_page_hero_EN").click(function(){$(".hepa").remove(),$(this).append('<span class="glyphicon glyphicon-ok hepa"></span>'),livePreview("full","en",x)}),$("#preview_page_FR").click(function(){$(".hepa").remove(),$(this).append('<span class="glyphicon glyphicon-ok hepa"></span>'),livePreview("small","fr",x)}),$("#preview_page_hero_FR").click(function(){$(".hepa").remove(),$(this).append('<span class="glyphicon glyphicon-ok hepa"></span>'),livePreview("full","fr",x)}),$("#preview_page_BOTH").click(function(){livePreview("small","all",x),$(".hepa").remove(),$(this).append('<span class="glyphicon glyphicon-ok hepa"></span>')}),$(t).css("background-color","#fff"),1==e&&$(".see_overlay").show()):($(t).css("background-color","rgba(255, 0, 0, 0.2)"),$(t).html("Unable to generate HTML\n\nREASON : Image does not exist!\n\nMake sure the image you have selected exists and try again"),$(".see_overlay").show())}function codeCleaner(){var e="#unclosed-tag-finder-input",t="#unclosed-tag-finder-button",l=$(e).val(),a=l.replace(/<br>/g,"").replace(/<br\/>/g,"").replace(/<br \/>/g,"").replace(/ style="text-align: left;"/g,"").replace(/ style="float: none;"/g,"").replace(/ style="text-align: right"/g,"").replace(/ style="text-align: center"/g,"").replace(/alt="" /g,"").replace(/'/g,"&apos;").replace(/(\r\n|\n|\r)/gm,"").replace('<span style="color: #000000;">',"").replace('<span style="color:#000000;">',"").replace('<span style="color: #000;">',"").replace('<span style="color:#000;">',"").replace('<span style="color: #ffffff;">',"").replace('<span style="color:#ffffff;">',"").replace('<span style="color: #fff;">',"").replace('<span style="color:#fff;">',"").replace("</span>",""),s=a.trim();$(e).val(s),$(t).removeClass("btn-primary").addClass("btn-success").removeClass("btn-danger"),$(t).attr("value","Your code has been cleaned")}function initDates(){var e=["January","February","March","April","May","June","July","August","September","October","November","December"],t=new Date,l=e[t.getMonth()],a=t.getDate(),s=t.getFullYear(),n=("0"+t.getHours()).slice(-2),i=("0"+t.getMinutes()).slice(-2),o=("0"+t.getSeconds()).slice(-2);$(".months").val(l),$(".days").val(a),$(".years").val(s),$(".hours").val(n),$(".minutes").val(i),$(".seconds").val(o),xpmo=l,xrmo=l,xpda=a,xrda=a,xpye=s,xrye=s,xpho=n,xrho=n,xpmi=i,xrmi=i,xpse=o,xrse=o,$("#start_date").attr("placeholder",xpmo+" "+xpda+", "+xpye+" "+xpho+":"+xpmi+":"+xpse),$("#end_date").attr("placeholder",xpmo+" "+xpda+", "+xpye+" "+xpho+":"+xpmi+":"+xpse)}$("document").ready(function(){function e(e){return e.match(/area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr|script/i)}$(".sparta").click(function(){$(this).hasClass("glyphicon-eye-close")?$(this).removeClass("glyphicon-eye-close").addClass("glyphicon-eye-open"):$(this).hasClass("glyphicon-eye-open")&&$(this).removeClass("glyphicon-eye-open").addClass("glyphicon-eye-close"),$(".autosuggest.starting").toggle()}),$(".athena").click(function(){$(this).hasClass("glyphicon-eye-close")?$(this).removeClass("glyphicon-eye-close").addClass("glyphicon-eye-open"):$(this).hasClass("glyphicon-eye-open")&&$(this).removeClass("glyphicon-eye-open").addClass("glyphicon-eye-close"),$(".autosuggest.ending").toggle()}),initDates();var t=document.querySelector("#image_gl"),l=new MutationObserver(function(e){e.forEach(function(){})}),a={attributes:!0,subtree:!0,childList:!0,characterData:!0};l.observe(t,a),$("#pop_up_ID").css("opacity",.3),$("#unclosed-tag-finder-button").click(function(){$("#results-alert").show();var t=$("#unclosed-tag-finder-input").val(),l=[];if($.each(t.split("\n"),function(e,t){$.each(t.match(/<[^>]*[^/]>/g)||[],function(t,a){var s=a.match(/<\/?([a-z0-9]+)/i);s&&l.push({tag:a,name:s[1],line:e+1,closing:"/"==a[1]})})}),0==l.length)return void $("#unclosed-tag-finder-results").text("No tags found.");for(var a=[],s=0;s<l.length;s++){var n=l[s];if(n.closing){var i=n;if(e(i.name))continue;if(0==a.length)return $("#unclosed-tag-finder-results").text("Closing tag "+i.tag+" on line "+i.line+" does not have corresponding open tag."),$("#unclosed-tag-finder-button").removeClass("btn-primary").removeClass("btn-success").addClass("btn-danger"),void $("#unclosed-tag-finder-button").attr("value","Your code has tag errors");var o=a[a.length-1];if(i.name!=o.name)return $("#unclosed-tag-finder-results").text("Closing tag "+i.tag+" on line "+i.line+" does not match open tag "+o.tag+" on line "+o.line+"."),$("#unclosed-tag-finder-button").removeClass("btn-primary").removeClass("btn-success").addClass("btn-danger"),void $("#unclosed-tag-finder-button").attr("value","Your code has tag errors");a.pop()}else{var o=n;if(e(o.name))continue;a.push(o)}}if(a.length>0){var o=a[a.length-1];return $("#unclosed-tag-finder-results").text("Open tag "+o.tag+" on line "+o.line+" does not have a corresponding closing tag."),void $("#unclosed-tag-finder-button").removeClass("btn-primary").removeClass("btn-success").addClass("btn-danger")}$("#unclosed-tag-finder-results").text("Success: No unclosed tags found."),codeCleaner()}),$("#pop_up_link").change(function(){"true"==$(this).val()?$("#pop_up_ID").css("opacity",1):"false"==$(this).val()&&$("#pop_up_ID").css("opacity",.3)}),$("#button_link_gl").keyup(function(){$(this).val().indexOf("http")>-1||$(this).val().indexOf("www")>-1?($(".link_alert").remove(),$(this).css("background-color","#FF3333"),$('<div class="link_alert">ONLY use relative links. A relative link looks like : /collections/mens-clothing</div>').insertAfter(this)):($(this).attr("style",""),$(".link_alert").remove())}),$(".starting .months").change(function(){xpmo=$(this).val(),$("#start_date").val(xpmo+" "+xpda+", "+xpye+" "+xpho+":"+xpmi+":"+xpse)}),$(".starting .days").change(function(){xpda=$(this).val(),$("#start_date").val(xpmo+" "+xpda+", "+xpye+" "+xpho+":"+xpmi+":"+xpse)}),$(".starting .years").change(function(){xpye=$(this).val(),$("#start_date").val(xpmo+" "+xpda+", "+xpye+" "+xpho+":"+xpmi+":"+xpse)}),$(".starting .hours").change(function(){xpho=$(this).val(),$("#start_date").val(xpmo+" "+xpda+", "+xpye+" "+xpho+":"+xpmi+":"+xpse)}),$(".starting .minutes").change(function(){xpmi=$(this).val(),$("#start_date").val(xpmo+" "+xpda+", "+xpye+" "+xpho+":"+xpmi+":"+xpse)}),$(".starting .seconds").change(function(){xpse=$(this).val(),$("#start_date").val(xpmo+" "+xpda+", "+xpye+" "+xpho+":"+xpmi+":"+xpse)}),$(".ending .months").change(function(){xrmo=$(this).val(),$("#end_date").val(xrmo+" "+xrda+", "+xrye+" "+xrho+":"+xrmi+":"+xrse)}),$(".ending .days").change(function(){xrda=$(this).val(),$("#end_date").val(xrmo+" "+xrda+", "+xrye+" "+xrho+":"+xrmi+":"+xrse)}),$(".ending .years").change(function(){xrye=$(this).val(),$("#end_date").val(xrmo+" "+xrda+", "+xrye+" "+xrho+":"+xrmi+":"+xrse)}),$(".ending .hours").change(function(){xrho=$(this).val(),$("#end_date").val(xrmo+" "+xrda+", "+xrye+" "+xrho+":"+xrmi+":"+xrse)}),$(".ending .minutes").change(function(){xrmi=$(this).val(),$("#end_date").val(xrmo+" "+xrda+", "+xrye+" "+xrho+":"+xrmi+":"+xrse)}),$(".ending .seconds").change(function(){xrse=$(this).val(),$("#end_date").val(xrmo+" "+xrda+", "+xrye+" "+xrho+":"+xrmi+":"+xrse)}),$(".generate_page").click(function(){$(".hepa").remove(),$(".hepaT").remove(),$("#html-view").html(""),$("#content_value").attr("style",""),$(".well.well-lg").attr("style",""),codeOutput(!0),checkOngoing(),errorViewer()}),$(document).keydown(function(e){return console.log(e.keyCode),71==e.keyCode&&e.ctrlKey?($(".generate_page").click(),!1):85==e.keyCode&&e.ctrlKey?($(".cleaner_open").click(),!1):void 0}),$("#content_value").click(function(){$(this).select()}),$("#unclosed-tag-merge-button").click(function(){codeCleaner(),getContent(),$(".see_cleaner_overlay").hide(250),codeOutput(!1),checkOngoing(),errorViewer(),$("li").attr("style","")}),$("#unclosed-tag-finder-input").click(function(){$(this).select()}),$(".see_overlay .glyphicon-remove").click(function(){$(".see_overlay").hide(),$("li").attr("style","")}),$(".see_help_overlay .glyphicon-remove").click(function(){$(".see_help_overlay").hide(),$("li").attr("style","")}),$(".see_cleaner_overlay .glyphicon-remove").click(function(){$(".see_cleaner_overlay").hide(),$("#cleaner_content_value").attr("style",""),$("#cleaner_error_value").attr("style",""),$("li").attr("style","")}),$(".cleaner_open").click(function(){$(".see_cleaner_overlay").show(),$(".well.well-lg").attr("style",""),$("html, body").animate({scrollTop:0},"slow")}),$("#title_color").change(function(){var e=$(this).val();switch(e){case"#fff":var t="white";break;case"#000":var t="black";break;case"#9bd000":var t="green";break;case"#ee3600":var t="red";break;default:var t="white"}$(".selector-color:not(."+t+")").removeClass("glyphicon glyphicon-ok"),$(".selector-color."+t).addClass("glyphicon glyphicon-ok")}),$(".selector-color").click(function(){if($(this).hasClass("white"))var e="#fff";else if($(this).hasClass("black"))var e="#000";else if($(this).hasClass("green"))var e="#9bd000";else if($(this).hasClass("red"))var e="#ee3600";$("#title_color").val(e),$(".selector-color").not(this).removeClass("glyphicon glyphicon-ok"),$(this).addClass("glyphicon glyphicon-ok")}),$("#close_preview_page").click(function(){$(".hepa").remove(),$("#html-view").html(""),$("#content_value").css("opacity",1),$(".preview").removeClass("fullsize").attr("style",""),$(".well.well-lg").attr("style","")}),$(".find_errors").click(function(){codeOutput(!1),checkOngoing(),errorViewer()}),$("#timer_preview_page").click(function(){var e=$(".b_line_exo.is-countdown").length,t=$(".fullsize").length,l=$(".event-active-bg").length;0==e&&0==t&&1==l?(appendTimer("add"),$(".hepaT").remove(),$(this).append('<span class="glyphicon glyphicon-ok hepaT"></span>')):(appendTimer("rem"),$(".hepaT").remove())}),$("#title_en").keyup(function(){var e=$(this).val().length,t=30-e;0>t?$(".en_title_count").css("background-color","#ff3300").css("font-weight","bold").css("color","#fff").html("Overlimit"):$(".en_title_count").attr("style","").html(t+" characters remaining")}),$("#title_fr").keyup(function(){var e=$(this).val().length,t=30-e;0>t?$(".fr_title_count").css("background-color","#ff3300").css("font-weight","bold").css("color","#fff").html("Overlimit"):$(".fr_title_count").attr("style","").html(t+" characters remaining")}),$("#subtitle_en").keyup(function(){var e=$(this).val().length,t=30-e;
    0>t?$(".en_subtitle_count").css("background-color","#ff3300").css("font-weight","bold").css("color","#fff").html("Overlimit"):$(".en_subtitle_count").attr("style","").html(t+" characters remaining")}),$("#subtitle_fr").keyup(function(){var e=$(this).val().length,t=30-e;0>t?$(".fr_subtitle_count").css("background-color","#ff3300").css("font-weight","bold").css("color","#fff").html("Overlimit"):$(".fr_subtitle_count").attr("style","").html(t+" characters remaining")}),$("#button_label_en").keyup(function(){var e=$(this).val().length,t=18-e;0>t?$(".en_btlabel_count").css("background-color","#ff3300").css("font-weight","bold").css("color","#fff").html("Overlimit"):$(".en_btlabel_count").attr("style","").html(t+" characters remaining")}),$("#button_label_fr").keyup(function(){var e=$(this).val().length,t=18-e;0>t?$(".fr_btlabel_count").css("background-color","#ff3300").css("font-weight","bold").css("color","#fff").html("Overlimit"):$(".fr_btlabel_count").attr("style","").html(t+" characters remaining")}),$("#start_date").keyup(function(){var e=$("#start_date").val().length;1>e?$(".date_starts").css("background-color","#ff3300").css("font-weight","bold").css("color","#fff").html("Can't be empty"):$(".date_starts").attr("style","").html("Strict date format")}),$("#end_date").keyup(function(){var e=$("#end_date").val().length;1>e?$(".date_ends").css("background-color","#ff3300").css("font-weight","bold").css("color","#fff").html("Can't be empty"):$(".date_ends").attr("style","").html("Strict date format")}),$("#check_image").click(function(e){validateImage("main"),e.preventDefault()}),$("#alt_check_image").click(function(e){validateImage("alt"),e.preventDefault()}),$("#clear_image").click(function(e){$("#image_gl").val("").attr("style",""),$(".image_count").attr("style","").html("Shopify CDN"),e.preventDefault()}),$("#alt_clear_image").click(function(e){$("#alt_image_gl").val("").attr("style",""),$(".alt_image_count").attr("style","").html("Shopify CDN"),e.preventDefault()}),$(".need_help").click(function(){$(".help_message_holder").empty(),$("html, body").animate({scrollTop:0},"slow"),$(".see_help_overlay").show(),$(this).hasClass("top_1")?$(".help_message_holder").html('<h3><span class="label label-default">Open link in a popup ?</span></h3><p>By default, hero page links send users to another page on the same site. Usually these are product or collection links. </p> <p>You can, however, set the link to open a modal window (pop-up) that will display a shopify page object. This can be usefull if the hero is an information banner, a direct call to action, an invite to an external source or simply does not require the user to be sent to another page.</p><p>The shopify page object will be loaded into the modal and it\'s title presented as the modal title. Modals are already pre-scripted with a close button, wells and gutters.</p><p>Click <span class="label label-info">YES</span> if you want your link to open in a modal popup. You will need to define what content to load into the modal itself.</p>'):$(this).hasClass("top_2")?$(".help_message_holder").html('<h3><span class="label label-default">Link To Which ID ?</span></h3><p>The ID refers to the shopify page object that has been defined in the theme settings.</p><p>Find the <span class="label label-info">PROMOTIONAL PARAMETERS</span> tab in the theme settings. At the bottom of the <span class="label label-info">HERO BANNER SETTINGS</span> section you will find a Pop Up Page 1 and a Pop Up Page 2 list menu. From each list menu, you can link a shopify page object to the predefined IDs.</p><p>The Pop Up Page 1 shopify page object is linked to popup-1 ID. If you select Popup 1 from the page designer form, this is the page that will be loaded into the modal.</p><p>To link another page, or create a new page for your modal, you can either select an existing page from the Pop Up Page 1 or Pop Up Page 2 list menus, or create a new page and select it from the list menus.</p><p><span class="label label-warning">NOTE:</span> Even if you bind a page to a pop up in page designer, you must activate the Hero Popups by checking the <span class="label label-info">Activate Hero Popups</span> checkbox.</p><p><span class="label label-primary">HELP:</span> Is the list menu greyed out? Make sure you\'ve selected <span class="label label-info">YES</span> in the <span class="label label-info">OPEN LINK IN A POPUP</span> list menu.</p>'):$(this).hasClass("top_3")?$(".help_message_holder").html('<h3><span class="label label-default">Show Countdown Timer ?</span></h3><p>Depending on what kind of sale you have programmed in a hero sale banner or block, you may want to disable the countdown timer, hence masking the countdown. A default <span class="label label-info">COMING SOON</span> message will be displayed in place of the timer.</p><p>This can be very usefull if you don\'t know when the sale will begin but still want to advertise it.</p><p>The <span class="label label-info">Coming Soon</span> text can be customised in the <span class="label label-info">Promotional Parameters</span><span class="glyphicon glyphicon-arrow-right"></span><span class="label label-info">Hero Banner Settings</span></p>'):$(this).hasClass("top_4")&&$(".help_message_holder").html('<h3><span class="label label-default">Is This An Ongoing Event ?</span></h3><p>By default, the hero banner object come in two formats. The large hero banner displays current sales or events that are presently running with a <span class="label label-info">count-down</span> timer. The block hero banner displays upcoming sales and events with a <span class="label label-info">count-up</span> timer.</p><p>In order to display sales that are currently active but that are less important than the main hero banner, the ongoing events attribute was created. This allows us to display hero events in a hero block format with a <span class="label label-info">count-down</span> timer. You can therefore have more then one current sale running on your home page at the same time.</p><p>Ongoing sales use the same format as hero blocks although they have the same class attributes as hero banners.</p><p><span class="label label-warning">NOTE:</span> Ongoing events are scripted after the page loads. Their code is injected into the document after the liquid template has been rendered. For this reason, they will always display <span class="label label-info">after</span> the upcoming events hero blocks</p>')}),$(".reset_page").click(function(){resetErrors()}),$("#toggle_line_breaks").click(function(){$(this).hasClass("dope")?(showLineBreaks("b"),$(this).removeClass("dope")):(showLineBreaks("a"),$(this).addClass("dope"))}),$(".app_info_toggle").click(function(){window.open("http://davidemaser.github.io/pgd/release.html","_blank","scrollbars=no,resizable=no,height=600, width=800, status=yes, toolbar=no, menubar=no, location=no")})});